<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Управление финансами</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body onclick="resetDeleteState()">

<div class="container" id="initial-screen">
    <h1>Настройте бюджет</h1>
    <label for="budget">Общий бюджет</label>
    <input type="number" id="budget" placeholder="Введите ваш бюджет" oninput="calculateDailyAllowance()" />

    <label for="last-day">Последний день</label>
    <input type="date" id="last-day" oninput="calculateDailyAllowance()" />

    <div class="allowance-text">
        Ваш дневной лимит будет <span id="daily-allowance">0</span>
    </div>

    <button class="button" onclick="handleStartButton()">СТАРТ</button>
</div>

<div class="container main-screen" id="main-screen" style="display: none;">
    <h2>Доступно сегодня</h2>
    <div id="available-amount" style="font-size: 32px; margin-bottom: 20px;">0</div>
    <div class="available-details">Всего: <span id="total-amount">0</span> до <span id="budget-end-date">--/--/----</span></div>

    <div class="button-container">
        <button class="expense-button" onclick="openExpenseModal()">Введите трату</button>
        <button class="settings-button-small" onclick="openSettings()">⚙️</button>
    </div>

    <div class="expense-list" id="expense-list"></div>
</div>

<div id="expenseModal" class="modal">
    <div class="modal-content">
        <h2>Введите трату</h2>
        <input type="number" id="expense-amount" placeholder="Введите сумму траты" />
        <button class="button" onclick="addExpense()">Добавить</button>
        <button class="close-button" onclick="closeExpenseModal()">Закрыть</button>
    </div>
</div>

<div id="settingsModal" class="modal">
    <div class="modal-content">
        <h2>Обновить бюджет и дату</h2>
        <label for="modal-budget">Изменить бюджет</label>
        <input type="number" id="modal-budget" />

        <label for="modal-last-day">Изменить дату</label>
        <input type="date" id="modal-last-day" />

        <div class="allowance-text">Новый дневной лимит: <span id="new-daily-allowance">0</span></div>

        <button class="button" onclick="updateSettings()">Сохранить</button>
        <button class="close-button" onclick="closeModal()">Закрыть</button>
    </div>
</div>

<script src="/static/js/script.js"></script>
</body>
</html>
