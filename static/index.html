<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Management</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body onclick="resetDeleteState()">

<div class="container" id="initial-screen">
    <h1>Setup your budget</h1>
    <label for="budget">Total Budget</label>
    <input type="number" id="budget" placeholder="Enter your budget" oninput="calculateDailyAllowance()" />

    <label for="last-day">Last Day</label>
    <input type="date" id="last-day" oninput="calculateDailyAllowance()" />

    <div class="allowance-text">
        Your daily allowance will be <span id="daily-allowance">0</span>
    </div>

    <button class="button" onclick="goToMainScreen()">START</button>
</div>

<div class="container main-screen" id="main-screen">
    <h2>Available Today</h2>
    <div id="available-amount" style="font-size: 32px; margin-bottom: 20px;">0</div>
    <div class="available-details">Total: <span id="total-amount">0</span> until <span id="budget-end-date">--/--/----</span></div>

    <div class="button-container">
        <button class="expense-button" onclick="openExpenseModal()">Введите трату</button>
        <button class="settings-button-small" onclick="openSettings()">⚙️</button>
    </div>

    <div class="expense-list" id="expense-list"></div>
</div>

<div id="expenseModal" class="modal">
    <div class="modal-content">
        <h2>Введите трату</h2>
        <input type="number" id="expense-amount" placeholder="Enter expense amount" />
        <button class="button" onclick="addExpense()">Add</button>
        <button class="close-button" onclick="closeExpenseModal()">Close</button>
    </div>
</div>

<div id="settingsModal" class="modal">
    <div class="modal-content">
        <h2>Update Budget and Date</h2>
        <label for="modal-budget">Edit Budget</label>
        <input type="number" id="modal-budget" />

        <label for="modal-last-day">Edit Last day</label>
        <input type="date" id="modal-last-day" />

        <div class="allowance-text">New daily allowance: <span id="new-daily-allowance">0</span></div>

        <button class="button" onclick="updateSettings()">Сохранить</button>
        <button class="close-button" onclick="closeModal()">Закрыть</button>
    </div>
</div>

<script src="/static/js/script.js"></script>
</body>
</html>
